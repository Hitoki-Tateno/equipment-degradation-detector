# 設備劣化検知プロジェクト — 開発体制・プロジェクト運営 議事録

## チーム構成

### 体制: 4人（段階的アサイン）

| 役割 | 担当領域 | アサイン時期 |
|------|----------|-------------|
| テックリード（あなた） | 横断的実装、interfaces/定義、Podman構築、CI整備、コードレビュー、技術的意思決定 | 全Step |
| バックエンドエンジニア | Store層、結果ストア、取り込みAPI、データ提供API、モデル定義API | Step 1〜 |
| フロントエンドエンジニア | React基盤、散布図プロット、インタラクティブUI、ダッシュボード | Step 1〜 |
| MLエンジニア | Isolation Forest実装、回帰分析、スコア算出、スケジューラー | Step 2〜 |

全員を最初から揃えるのではなく、各Stepで必要な人を必要なタイミングでアサインする。

---

## Step別タスク分担

### Step 1: データ可視化（3人）

| 担当 | タスク |
|------|--------|
| バックエンド | Store層（SQLite実装 + 抽象クラス）、取り込みAPI、データ提供API |
| フロントエンド | React基盤構築、分類ツリー表示、散布図プロット（Plotly.js） |
| テックリード | interfaces/の抽象クラス定義、Containerfile・supervisord構築、各層の結合、CI整備、コードレビュー |

### Step 2: 異常検知モデル定義（4人 — MLエンジニア合流）

| 担当 | タスク |
|------|--------|
| バックエンド | 結果ストア、モデル定義API、分析結果API |
| ML | Isolation Forest実装、回帰分析、スコア算出 |
| フロントエンド | ベースライン範囲選択、除外点操作、感度スライダー |
| テックリード | 分析層とStore層の結合、コードレビュー |

### Step 3: 継続監視（4人）

| 担当 | タスク |
|------|--------|
| バックエンド | 手動トリガーAPI |
| ML | スケジューラー実装、判定フロー構築 |
| フロントエンド | 監視ダッシュボード |
| テックリード | 全体結合、本番デプロイ準備、コードレビュー |

---

## TDD方針

### 適用範囲

テスト戦略で「厚い」と定めた層にのみTDDを適用する。それ以外の層にTDDを強制しない。

| 対象 | TDD適用 | 理由 |
|------|---------|------|
| 層間インターフェース（契約テスト） | ✅ 適用 | アーキテクチャ整合性の生命線 |
| 分析層のロジック | ✅ 適用 | コアバリュー。バグが検知精度に直結 |
| Store層の実装 | ❌ 非適用 | 契約テストで間接的に担保 |
| 取り込みAPI | ❌ 非適用 | バリデーションはFastAPIに委任 |
| 表示層 | ❌ 非適用 | 描画は目視確認が効率的 |

### TDDの進め方（Red-Green-Refactor）

1. テストを先に書く（Red — テストが失敗する状態）
2. テストを通す最小限の実装を書く（Green）
3. コードを整理する（Refactor）

---

## プロジェクト運営

### イテレーション

- 各Stepの中を1〜2週間のイテレーションに分割
- 重厚なスクラムは3〜4人に過剰。カンバン寄りの軽量運営

### タスク管理

- カンバンボード（To Do / In Progress / In Review / Done）で管理
- タスクの粒度: 1イシュー = 1PR = 1〜3日で完了する単位

### 開発フロー（1イシューの流れ）

1. イシューを取る
2. featureブランチを切る
3. TDD対象の層なら先にテストを書く（Red）
4. 実装する（Green）
5. リファクタリング（Refactor）
6. PRを出す → CIが回る（linter + テスト）
7. テックリードがレビュー
8. マージ

### コミュニケーション

- 日次スタンドアップ: 口頭5分。「昨日やったこと、今日やること、ブロッカー」のみ
- 週次振り返り: 粒度やプロセスの調整

### Step 1 タスク分解例

**バックエンド:**

1. interfaces/の抽象クラス実装 ← TDD: 契約テストを先に書く
2. Store層のSQLite実装（categories）← TDD
3. Store層のSQLite実装（work_records）← TDD
4. 取り込みAPI（POST /api/records）
5. データ提供API（GET /api/records）
6. 分類ツリーAPI（GET /api/categories）

**フロントエンド:**

7. React基盤 + ルーティング
8. 分類ツリー表示コンポーネント
9. 散布図プロットコンポーネント
10. APIとの接続

**インフラ:**

11. Containerfile + supervisord
12. CI設定（linter + テスト）

---

## 各Stepの完了定義（Definition of Done）

| Step | 完了定義 |
|------|----------|
| Step 1 | 任意のデータソースからデータを投入し、ブラウザで分類別の散布図が表示できる |
| Step 2 | ユーザーがGUI上でベースライン選択・除外点指定・感度調整を行い、異常判定結果がリアルタイムに反映される |
| Step 3 | 定期実行で新規データが判定され、ダッシュボードに結果が表示される |

---

*最終更新: 2026-02-11*
